<div class="container-fluid">
    <app-nav class="w-100"></app-nav>

    <section class="register px-2" style="max-width: 800px;" name="register">
        <h3 class="fs-5 fw-bold">Cadaste uma Viagem</h3>
        <p class="fs-6 mb-2">Registre agora mesmo a próxima viagem que você deseja vender passagens em nossa plataforma!</p>

        <form action="" class="py-3 d-flex flex-column">
            <h3 class="fs-5 fw-bold w-100">Partida</h3>
            <section name="departure" class="w-100 card p-3">
            <div class="content-info w-100 d-flex gap-3">
                <div class="content-info_left w-100">
                    <label class="w-100 fw-bold">Data</label>
                    <app-custom-input
                        type="date"
                        class="w-100"
                        type_input="standard"
                        [(value)]="departure_date">
                    </app-custom-input>
                </div>

                <div class="content-info_right w-100">
                    <label class="w-100 fw-bold">Hora</label>
                    <app-custom-input
                        type="time"
                        class="w-100"
                        type_input="standard"
                        [(value)]="departure_time">
                    </app-custom-input>
                </div>
            </div>
            <div class="harbor w-100 d-flex gap-3">
                <div class="left d-flex w-100">
                    <label class="fs-6 fw-bold">Cidade</label>
                    <select
                        class="form-select"
                        [(ngModel)]="selectedDepartureCity"
                        name="departureCity"
                        (ngModelChange)="loadDepartureHarbor()">
                        <option [ngValue]="null" disabled>Selecione a cidade...</option>

                        <option *ngFor="let city of citys" [ngValue]="city">
                            {{ city.name }}
                        </option>
                    </select>
                </div>
                <div class="right d-flex w-100">
                    <label class="fs-6 fw-bold">Porto</label>
                    <select
                        class="form-select"
                        [(ngModel)]="trip.departure_harbor"
                        name="departureHarbor">
                        <option [ngValue]="null" disabled>Selecione o porto...</option>

                        <option *ngFor="let harbor of harborDeparture" [ngValue]="harbor.id">
                            {{ harbor.name }}
                        </option>
                    </select>
                </div>
            </div>
            </section>
            <h3 class="fs-5 fw-bold w-100 h-form">Chegada</h3>
            <section name="harbor" class="w-100 card p-3">
                <div class="content-info w-100 d-flex gap-3">
                    <div class="content-info_left w-100">
                        <label class="w-100 fw-bold">Data</label>
                        <app-custom-input
                            type="date"
                            class="w-100"
                            type_input="standard"
                            [(value)]="departure_date">
                        </app-custom-input>
                    </div>

                    <div class="content-info_right w-100">
                        <label class="w-100 fw-bold">Hora</label>
                        <app-custom-input
                            type="time"
                            class="w-100"
                            type_input="standard"
                            [(value)]="arrival_time">
                        </app-custom-input>
                    </div>
                </div>
                <div class="harbor w-100 d-flex gap-3">
                    <div class="left d-flex w-100">
                        <label class="fs-6 fw-bold">Cidade</label>
                        <select
                            class="form-select"
                            [(ngModel)]="selectedArrivalCity"
                            name="departureCity"
                            (ngModelChange)="loadArrivalHarbor()">
                            <option [ngValue]="null" disabled>Selecione a cidade...</option>

                            <option *ngFor="let city of citys" [ngValue]="city">
                                {{ city.name }}
                            </option>
                        </select>
                    </div>
                    <div class="right d-flex w-100">
                        <label class="fs-6 fw-bold">Porto</label>
                        <select
                            class="form-select"
                            [(ngModel)]="trip.arrival_harbor"
                            name="departureHarbor">
                            <option [ngValue]="null" disabled>Selecione o porto...</option>

                            <option *ngFor="let harbor of harborArrival" [ngValue]="harbor.id">
                                {{ harbor.name }}
                            </option>
                        </select>
                    </div>
                </div>
            </section>
            <h3 class="fs-5 fw-bold h-form">Dados</h3>
            <section class="w-100 card p-3 m-0">
                <label class="fs-6 fw-bold w-100 m-0">Embarcação</label>
                <div class=" vessel w-100">
                    <select
                        class="form-select"
                        [(ngModel)]="trip.vessel"
                        name="vessel">

                        <option [ngValue]="null" disabled>Selecione a embarcação...</option>

                        <option *ngFor="let vessel of vessels" [ngValue]="vessel.id">
                            {{ vessel.name }}
                        </option>
                    </select>
                </div>
                <div class="price w-100 d-flex gap-3">
                    <div class="left d-flex w-100">
                        <label class="fw-bold fs-6 w-100">Preço individual</label>
                        <app-custom-input
                            type="number"
                            [(value)]="trip.individual_base_price">
                        </app-custom-input>
                    </div>

                    @if (trip.vessel && trip.vessel !== null && typeof trip.vessel === 'object' && trip.vessel.vessel_type==='BOAT') {
                        <div class="right d-flex flex-column w-100">
                            <label class="fw-bold fs-6 w-100">Preço do Camarote</label>
                            <app-custom-input
                                type="number"
                                [(value)]="trip.cabin_base_price">
                            </app-custom-input>
                        </div>
                    }
                </div>
            </section>
            <app-custom-button
                class="mt-3 w-100"
                name="Cadastrar"
                (click)="register($event)">
            </app-custom-button>

        </form>

    </section>
    <app-footer class="w-100"></app-footer>
</div>
